<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Making JavaScript Games: from the Browser to the App Store</title>

		<meta name="description" content="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX">
		<meta name="author" content="Eric Lathrop">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">
		<link rel="stylesheet" href="css/makingjsgames.css">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Making JavaScript Games</h1>
					<h3>From the Browser to the App Store</h3>
					<p>
						<small>Created by <a href="http://ericlathrop.com">Eric Lathrop</a> / <a href="http://twitter.com/ericlathrop">@ericlathrop</a></small>
					</p>
				</section>

				<section>
					<canvas id="canvas" width="640" height="480"></canvas>
					<pre><code>
<canvas id="canvas" width="640" height="480"></canvas>
					</code></pre>
				</section>

				<section>
					<canvas id="canvas-rect" width="640" height="480"></canvas>
					<script>
						var canvas = document.getElementById("canvas-rect");
						var ctx = canvas.getContext("2d");
						ctx.fillStyle = "#f00";
						ctx.fillRect(270, 190, 100, 100);
					</script>
					<pre><code>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
ctx.fillStyle = "#f00";
ctx.fillRect(270, 190, 100, 100);
					</code></pre>
				</section>

				<section>
					<canvas id="canvas-text" width="640" height="480"></canvas>
					<script>
						var canvas = document.getElementById("canvas-text");
						var ctx = canvas.getContext("2d");
						ctx.fillStyle = "yellow";
						ctx.font = "60px sans-serif";
						ctx.fillText("Hello World!", 150, 250);
					</script>
					<pre><code>
						ctx.fillStyle = "yellow";
						ctx.font = "60px sans-serif";
						ctx.fillText("Hello World!", 150, 250);
					</code></pre>
				</section>

				<section data-state="canvas-image">
					<canvas id="canvas-image" width="640" height="480"></canvas>
					<script>
						var canvas = document.getElementById("canvas-image");
						var ctx = canvas.getContext("2d");
						var logo = new Image();
						logo.addEventListener("load", function() {
							ctx.drawImage(logo, 70, 100);
						});
						logo.src = "two-scoop-games-logo.png";
					</script>
					<pre><code>
var logo = new Image();
logo.addEventListener("load", function() {
    ctx.drawImage(logo, 70, 100);
});
logo.src = "two-scoop-games-logo.png";
					</code></pre>
				</section>

				<section data-state="canvas-render-loop">
					<canvas id="canvas-render-loop" width="640" height="300"></canvas>
					<pre><code>
function render(time) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "yellow";
    ctx.font = "60px sans-serif";
    ctx.fillText(time, 150, 150);
    window.requestAnimationFrame(render);
}
window.requestAnimationFrame(render);
					</code></pre>
				</section>

				<section data-state="canvas-render-loop-elapsed">
					<canvas id="canvas-render-loop-elapsed" width="640" height="300"></canvas>
					<pre><code>
var lastTime = -1;
function elapsedTime(time) {
    var elapsed = time - lastTime;
    if (lastTime === -1) {
        elapsed = 0;
    }
    lastTime = time;
    return elapsed;
}
					</code></pre>
				</section>

				<section data-state="canvas-fps">
					<canvas id="canvas-fps" width="640" height="300"></canvas>
					<pre><code>
var fps = Math.floor((1 / elapsed) * 1000) + " FPS";
					</code></pre>
				</section>

				<section data-state="canvas-animation">
					<canvas id="canvas-animation" width="640" height="200"></canvas>
					<div>
						<label>Milliseconds per frame: <input type="text" value="40" id="canvas-animation-time" size="4" /></label>
					</div>
					<pre><code>
var animation = {
    img: new Image(),
    time: 0,
    frames: 22,
    msPerFrame: 40,
    advance: function(elapsed) {
        this.time += elapsed;
    },
    draw: function(ctx, x, y) {
        var width = this.img.width / this.frames;
        var frame = Math.floor(this.time / this.msPerFrame) % this.frames;
        var frameX = frame * width;
        ctx.drawImage(this.img,
            frameX, 0, width, this.img.height,
            x, y, width, this.img.height);
    }
};
animation.img.src = "hamster-run-right-f22.png";
					</code></pre>
				</section>

				<section>
					<pre><code>
var keys = {};
var keyMap = { 87: 'w', 65: 'a', 83: 's', 68: 'd' };

window.addEventListener("keydown", function(e) {
    keys[keyMap[e.keyCode]] = true;
});

window.addEventListener("keyup", function(e) {
    keys[keyMap[e.keyCode]] = false;
});
					</code></pre>
				</section>

				<section data-state="canvas-keyboard">
					<canvas id="canvas-keyboard" width="640" height="300"></canvas>
					<div>
						<label>Speed: <input type="text" value="0.2" id="canvas-keyboard-speed" size="4" /> pixels per millisecond</label>
					</div>
					<pre><code>
var boxX = 200, boxY = 100, boxSpeed = .2;

function render(ctx, elapsed) {
    if (keys["w"]) { boxY -= boxSpeed * elapsed; }
    if (keys["a"]) { boxX -= boxSpeed * elapsed; }
    if (keys["d"]) { boxX += boxSpeed * elapsed; }
    if (keys["s"]) { boxY += boxSpeed * elapsed; }
    ctx.fillRect(boxX, boxY, 100, 100);
}
					</code></pre>
				</section>

				<section>
					<h2>Other APIs</h2>
					<ul>
						<li>Gamepads</li>
						<li>Vibration</li>
						<li>Ambient Light</li>
						<li>Location</li>
						<li>Accelerometer</li>
						<li>Full screen</li>
						<li>Camera</li>
						<li>Microphones</li>
						<li>Websockets / WebRTC data channel</li>
					</ul>
				</section>

				<section>
					<h1>THE END</h1>
					<h3>BY Eric Lathrop</h3>
					<ul>
						<li>Slide source at <a href="https://github.com/ericlathrop/making-js-games-presentation">github.com/ericlathrop/making-js-games-presentation</a></li>
						<li>Follow me on Twitter <a href="http://twitter.com/ericlathrop">@ericlathrop</a></li>
						<li>Play my games at <a href="http://twoscoopgames.com">TwoScoopGames.com</a></li>
						<li>Check out my game engine: <a href="https://splatjs.github.io">splatjs.github.io</a></li>
					</ul>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: 'night',
				transition: 'linear',

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					//{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					//{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					//{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					//{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

		<script src="js/makingjsgames.js"></script>
	</body>
</html>
